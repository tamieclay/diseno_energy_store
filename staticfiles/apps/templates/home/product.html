<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link rel="stylesheet" href="{{ ASSETS_ROOT }}/css/product.css">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="icon"
      type="imapro/png"
      sizes="32x32"
      href="{{ ASSETS_ROOT }}/imapro/favicon-32x32.png"
    />

    <script defer src="product.js"></script>

    <title>Diseno | Energy</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  </head>
  <body>
    <div class="body-wrapper"></div>

    <!-- Overlay image Modal -->
    <div class="overlay-container">
      <div class="item-overlay">
        <button class="item-overlay__btn">
          <img
            src="imapro/icon-close.svg"
            alt="close image"
            class="item-overlay__btn-img"
          />
        </button>
        <div class="item-overlay__mainImg">
          <img
            src="imapro/image-product-1.jpg"
            alt=""
            class="item-overlay__img"
          />
          <button class="item-overlay__btnlft overlay-btn">
            <img
              src="imapro/icon-next.svg"
              alt="next symbol image"
              class="item-overlay__btnlft-img overlay-btn__img"
            />
          </button>
          <button class="item-overlay__btnrgt overlay-btn">
            <img
              src="imapro/icon-next.svg"
              alt="next symbol image"
              class="item-overlay__btnrgt-img overlay-btn__img"
            />
          </button>
        </div>
        <div class="overlay-img__btns">
          <button class="overlay-img__btn" data-img="0">
            <img
              src="imapro/image-product-1-thumbnail.jpg"
              alt="shoe product image"
              class="overlay-img__btn-img"
            />
          </button>
          <button class="overlay-img__btn" data-img="1">
            <img
              src="imapro/image-product-2-thumbnail.jpg"
              alt="shoe product image"
              class="overlay-img__btn-img"
            />
          </button>
          <button class="overlay-img__btn" data-img="2">
            <img
              src="imapro/image-product-3-thumbnail.jpg"
              alt="shoe product image"
              class="overlay-img__btn-img"
            />
          </button>
          <button class="overlay-img__btn" data-img="3">
            <img
              src="imapro/image-product-4-thumbnail.jpg"
              alt="shoe product image"
              class="overlay-img__btn-img"
            />
          </button>
        </div>
      </div>
    </div>

    <!-- Cart -->
    <div class="head-cart">
      <h3 class="head-cart__heading">Cart</h3>
      <div class="head-cart__txt">Your cart is empty.</div>
      <div class="head-cart__item">
        <div class="head-cart__item-wrapper">
          <img
            src="imapro/image-product-1-thumbnail.jpg"
            alt="cart product image"
            class="head-cart__item-img"
          />
          <div class="head-cart__des">
            <p class="head-cart__des-txt">{{object.product_title}}</p>
            <div class="head-cart__price">
              <span class="head-cart__price-single">$125.00*3</span>
              <span class="head-cart__price-total">$375.00</span>
            </div>
          </div>
          <button class="head-cart__item-btn">
            <img
              src="imapro/icon-delete.svg"
              alt="delete image"
              class="head-cart__btn-img"
            />
          </button>
        </div>

        <button class="head-cart__btn btn--orange">Checkout</button>
      </div>
    </div>

    <!-- Header -->
    <header class="head">
      <div class="head-lft">
        <button class="head-lft__btn">
          <img
            src="imapro/icon-menu.svg"
            alt="menu image"
            class="head-lft__btn-img"
          />
        </button>
        <img src="{{ ASSETS_ROOT }}/imapro/logo.svg" alt="logo" class="head-logo" /> 
        <ul class="head-nav">
          <li class="head-nav__item">diseno-lite</li>
          <li class="head-nav__item">diseno-gold</li>
          <li class="head-nav__item">diseno-platnum</li>
          <li class="head-nav__item">About</li>
          <li class="head-nav__item">Contact</li>
        </ul>
      </div>

      <div class="head-rgt">
        <button class="head-rgt__btn">
          <img
            src="{{ ASSETS_ROOT }}/imapro/icon-cart.svg"
            alt="cart image"
            class="head-cart__btn-img"
          />
        </button>

        <img
          src="{{ ASSETS_ROOT }}/imapro/image-avatar.png"
          alt="person image"
          class="head-rgt__img"
        />
      </div>
    </header>

    <!-- Main item container -->
    <main class="item">
      <section class="img">
        <button class="img-main__btnlft img-main__btn">
          <img
            src="{{ ASSETS_ROOT }}/imapro/icon-next.svg"
            alt="next symbol image"
            class="img-main__btnlft-img img-main__btn-img"
          />
        </button>
        <button class="img-main__btnrgt img-main__btn">
          <img
            src="{{ ASSETS_ROOT }}/imapro/icon-next.svg"
            alt="next symbol image"
            class="img-main__btnrgt-img img-main__btn-img"
          />
        </button>
        <img src="{{ ASSETS_ROOT }}/imapro/image-product-1.jpg" alt="" class="img-main" />
        <div class="img-btns">
          <button class="img-btn">
            <img
              src="{{ ASSETS_ROOT }}/imapro/image-product-1-thumbnail.jpg"
              alt="shoe product image"
              class="img-btn__img"
            />
          </button>
          <button class="img-btn">
            <img
              src="{{ ASSETS_ROOT }}/imapro/image-product-2-thumbnail.jpg"
              alt="shoe product image"
              class="img-btn__img"
            />
          </button>
          <button class="img-btn">
            <img
              src="{{ ASSETS_ROOT }}/imapro/image-product-3-thumbnail.jpg"
              alt="shoe product image"
              class="img-btn__img"
            />
          </button>
          <button class="img-btn">
            <img
              src="{{ ASSETS_ROOT }}/imapro/image-product-4-thumbnail.jpg"
              alt="shoe product image"
              class="img-btn__img"
            />
          </button>
        </div>
      </section>

      <section class="price">
        <h2 class="price-sub__heading">diseno energy</h2>
        <h1 class="price-main__heading">{{object.product_title}}</h1>
        <p class="price-txt">
          {{object.product_desc}}
        </p>
        <div class="price-box">
          <div class="price-box__main">
            <span class="price-box__main-new">{{object.product_price}}</span>
            <span class="price-box__main-discount"> 50%</span>
          </div>
          <span class="price-box__old">$250.00</span>
        </div>

        <div class="price-btnbox">
          <div class="price-btns">
            <button class="price-btn__add price-btn">
              <img
                src="{{ ASSETS_ROOT }}/imapro/icon-plus.svg"
                alt="plus sign"
                class="price-btn__add-img price-btn__img"
              />
            </button>
            <span class="price-btn__txt">0</span>
            <button class="price-btn__remove price-btn">
              <img
                src="{{ ASSETS_ROOT }}/imapro/icon-minus.svg"
                alt="minus sign"
                class="price-btn__remove-img price-btn__img"
              />
            </button>
          </div>
          <button class="price-cart__btn btn--orange">
            <img
              src="{{ ASSETS_ROOT }}/imapro/icon-cart.svg"
              alt="cart image"
              class="price-cart__btn-img"
            />
            Add to cart
          </button>
        </div>
      </section>
    </main>

    <!-- Attribution -->
    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by <a href="#">venkatesh.b</a>.
    </div>

<script>
  "use strict";

  const imgBtn = Array.from(document.querySelectorAll(".img-btn"));
  const img = document.querySelector(".img-main");
  const mainImgBtns = Array.from(document.querySelectorAll(".img-main__btn"));
  
  const overlayCon = document.querySelector(".overlay-container");
  const overlayImg = document.querySelector(".item-overlay__img");
  const overlayImgBtn = Array.from(
    document.querySelectorAll(".overlay-img__btn")
  );
  const overlayBtnImgs = Array.from(
    document.querySelectorAll(".overlay-img__btn-img")
  );
  const overlayCloseBtn = document.querySelector(".item-overlay__btn ");
  const overlayBtns = Array.from(document.querySelectorAll(".overlay-btn"));
  
  const cartBtn = document.querySelector(".head-rgt__btn");
  const cart = document.querySelector(".head-cart");
  const cartItem = document.querySelector(".head-cart__item");
  const emptyCartTxt = document.querySelector(".head-cart__txt");
  const addToCart = document.querySelector(".price-cart__btn");
  const clearCart = document.querySelector(".head-cart__item-btn");
  const priceSingle = document.querySelector(".head-cart__price-single");
  const priceTotal = document.querySelector(".head-cart__price-total");
  
  const priceBtns = Array.from(document.querySelectorAll(".price-btn__img"));
  const totalItems = document.querySelector(".price-btn__txt");
  
  const menuOpen = document.querySelector(".head-lft__btn");
  const menu = document.querySelector(".head-nav");
  const menuBtnImg = document.querySelector(".head-lft__btn-img");
  
  const bodyOverlay = document.querySelector(".body-wrapper");
  const body = document.querySelector("body");
  
  const headerCart = document.querySelector(".head-rgt");
  
  /* Eventlisteners related to cart and items adding */
  let nextImg = 0,
    noOfItems = 0,
    clicked,
    trasitionTimer;
  
  const minQuery = window.matchMedia("(min-width: 850px)"),
    maxQuery = window.matchMedia("(max-width: 850px)");
  
  /*//////////////////////
   Functions 
   /////////////////////*/
  /*Function to stop transition animation from triggering when page resize and reloading  */
  function transitionDelay() {
    body.classList.add("preload");
    clearTimeout(trasitionTimer);
    trasitionTimer = setTimeout(() => {
      body.classList.remove("preload");
    }, 1000);
  }
  
  /* Function to get next and previous images*/
  function imgBtns(btns, img, imgName) {
    btns.forEach((btn) => {
      btn.addEventListener("click", function (e) {
        if (e.target.classList.contains(`${imgName}__btnlft-img`)) {
          if (nextImg <= 0) nextImg = 3;
          else nextImg--;
  
          img.src = `{{ ASSETS_ROOT }}/imapro/image-product-${nextImg + 1}.jpg`;
        }
  
        if (e.target.classList.contains(`${imgName}__btnrgt-img`)) {
          if (nextImg >= 3) nextImg = 0;
          else nextImg++;
  
          img.src = `{{ ASSETS_ROOT }}/imapro/image-product-${nextImg + 1}.jpg`;
        }
      });
    });
  }
  
  imgBtns(overlayBtns, overlayImg, "item-overlay");
  imgBtns(mainImgBtns, img, "img-main");
  
  /* Function to show single and total items price in the cart  */
  function productPrice(items) {
    totalItems.textContent = items;
    priceSingle.textContent = `$125 * ${items}`;
    priceTotal.textContent = `$${125 * items}`;
    if (items >= 1) {
      headerCart.setAttribute("data-content", `${items}`);
      headerCart.style.setProperty("--display", `block`);
    } else {
      headerCart.style.setProperty("--display", `none`);
    }
  }
  
  /* Function to close navigation menu */
  function closeMenu() {
    menu.classList.remove("open-menu");
    body.style.overflow = "visible";
    bodyOverlay.classList.remove("open-overlay");
    menuBtnImg.src = "{{ ASSETS_ROOT }}/imapro/icon-menu.svg";
  }
  
  /* Function to open navigation menu */
  
  function openMenu() {
    menu.classList.add(".open-menu");
    menuBtnImg.src = "imapro/icon-close.svg";
    body.style.overflow = "hidden";
    cart.classList.remove("open-cart");
    bodyOverlay.classList.add("open-overlay");
  }
  
  /* Function to delete cart item when cart items are zero */
  
  function cartIt() {
    cartItem.classList.add("open-cart");
    emptyCartTxt.classList.remove("open-cart");
  }
  
  /* Function to delete cart text 'empty cart' when cart items are > 0 */
  
  function cartTx() {
    cartItem.classList.remove("open-cart");
    emptyCartTxt.classList.add("open-cart");
  }
  
  /* Function to delete cart text cart item  */
  function emptyCart() {
    cartItem.classList.remove("open-cart");
    emptyCartTxt.classList.remove("open-cart");
  }
  
  /*//////////////////////
   Event Listeners 
   /////////////////////*/
  
  /*  Eventlistener to close and open cart   */
  
  cartBtn.addEventListener("click", function () {
    cart.classList.toggle("open-cart");
    if (cart.classList.contains("open-cart")) {
      if (noOfItems >= 1 && clicked === true) cartIt();
      else cartTx();
    } else {
      emptyCart();
    }
  });
  
  /*  Eventlistener to increase and decrease no. of items   */
  priceBtns.forEach((btn) => {
    btn.addEventListener("click", function (e) {
      clicked = false;
      if (e.target.classList.contains("price-btn__add-img")) {
        if (noOfItems >= 10) return;
        noOfItems++;
        productPrice(noOfItems);
      } else if (e.target.classList.contains("price-btn__remove-img")) {
        if (noOfItems <= 0) return;
        noOfItems--;
        productPrice(noOfItems);
      }
    });
  });
  
  /*  Eventlistener for add to cart button  */
  addToCart.addEventListener("click", function (e) {
    clicked = true;
    if (cart.classList.contains("open-cart")) {
      if (noOfItems >= 1) {
        cartIt();
      } else if (noOfItems <= 0) {
        cartTx();
      }
    }
  });
  
  /*  Eventlistener for delete cart item button   */
  clearCart.addEventListener("click", function () {
    cartTx();
    noOfItems = 0;
    totalItems.textContent = noOfItems;
    headerCart.style.setProperty("--display", `none`);
  });
  
  /*  Eventlistener to open overlay image modal   */
  img.addEventListener("click", function () {
    if (minQuery.matches) {
      overlayCon.style.display = "block";
      overlayImg.src = img.src;
    }
  });
  
  /*  Eventlistener to close overlay image modal   */
  overlayCloseBtn.addEventListener("click", function () {
    if (minQuery.matches) {
      overlayCon.style.display = "none";
    }
  });
  
  /*  Eventlistener for overlay image modal btn to change overlay image same as button image  */
  overlayImgBtn.forEach((btn, i) => {
    btn.addEventListener("click", function (e) {
      overlayImg.src = `{{ ASSETS_ROOT }}/imapro/image-product-${i + 1}.jpg`;
      nextImg = e.target.dataset.img;
    });
  });
  
  /*  Eventlistener for  image to change when image button is clicked  */
  imgBtn.forEach((btn, i) => {
    btn.addEventListener("click", function () {
      img.src = `{{ ASSETS_ROOT }}/imapro/image-product-${i + 1}.jpg`;
    });
  });
  
  /* Menu eventlisteners */
  /*  Eventlistener to open menu / navigation  */
  menuOpen.addEventListener("click", function () {
    menu.classList.toggle("open-menu");
    if (menu.classList.contains("open-menu")) {
      openMenu();
      emptyCart();
    } else {
      closeMenu();
    }
  });
  
  /*  Eventlistener to stop transition animation from triggering when page resize */
  window.addEventListener("resize", function () {
    transitionDelay();
  
    if (maxQuery.matches) overlayCon.style.display = "none";
  
    if (minQuery.matches) closeMenu();
  });
  
  /*  Eventlistener to stop transition animation from triggering when page reloading  */
  window.addEventListener("load", function () {
    transitionDelay();
  });
  

</script>




  </body>
</html>
